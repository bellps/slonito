<%= helpers.turbo_stream_from "messages_from_chat_#{@chat.id}" %>

<div data-controller="markdown" id="chat_container" class="scroll-smooth snap-end w-full h-screen px-4 lg:px-12 sm:px-6 pb-10 flex-grow overflow-y-auto flex flex-col flex-1">
  <%= render(::NavbarComponent.new) %>
  <%= render(::MessageComponent.with_collection(@chat.messages.order(created_at: :asc))) %>
</div>

<div class="bg-opacity-20 w-full flex-none py-6 max-w-7xl mx-auto pt-0 md:pb-8 sm:pb-6 sm:px-6 md:px-6">
  <%= render(::MessageInputComponent.new(chat: @chat)) %>
</div>

<%= render(::ShowSchemaModalComponent.new(chat: @chat)) %>

<script>
  var objDiv = document.getElementById("chat_container");
  objDiv.scrollTop = objDiv.scrollHeight;
</script>
